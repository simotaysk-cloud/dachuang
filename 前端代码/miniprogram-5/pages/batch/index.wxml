<view class="page-container">
    <view class="header">
        <view class="title">æ‰¹æ¬¡ç®¡ç†</view>
        <view class="desc">ç®¡ç†æ‰€æœ‰ä¸­è¯æçš„æº¯æºèº«ä»½æ‰¹æ¬¡</view>
    </view>
    <!-- åˆ—è¡¨å±•ç¤º -->
    <view class="card">
        <view class="section-title">æ‰¹æ¬¡åˆ—è¡¨</view>
        <view class="search-bar">
            <input class="input-inline" placeholder="è¾“å…¥ ID æˆ– æ‰¹æ¬¡å·æŸ¥è¯¢" value="{{queryNo}}" bindinput="onQueryInput" />
            <button class="btn-small" bindtap="query">æŸ¥è¯¢</button>
        </view>
        <view class="btn-group" style="margin-bottom: 20rpx;">
            <button class="btn btn-primary" bindtap="startCreate">æ–°å»ºæ‰¹æ¬¡</button>
            <button class="btn btn-outline" bindtap="listAll">åˆ·æ–°åˆ—è¡¨</button>
        </view>
        <!-- åˆ—è¡¨å†…å®¹ -->
        <view class="list" wx:if="{{batches && batches.length > 0}}">
            <view class="list-item" wx:for="{{batches}}" wx:key="id" bindtap="editFromList" data-item="{{item}}">
                <view class="list-main">
                    <view class="list-title">
                        {{item.name}}
                        <text style="font-size:24rpx; color:#999; font-weight:normal;">
                            ({{item.batchNo}})
                        </text>
                    </view>
                    <view class="list-sub">
                        äº§åœ°: {{item.origin || '-'}} Â· çŠ¶æ€: {{item.status || '-'}}
                    </view>
                    <view class="list-meta" wx:if="{{item.quantity}}">
                        åº“å­˜: {{item.quantity}}{{item.unit}}
                        <text wx:if="{{item.gs1Locked}}">ğŸ”’</text>
                    </view>
                </view>
                <view class="list-action">ç¼–è¾‘</view>
            </view>
        </view>
        <view class="empty" wx:if="{{(!batches || batches.length === 0) && !loading}}">æš‚æ— æ‰¹æ¬¡æ•°æ®</view>
    </view>
</view>
